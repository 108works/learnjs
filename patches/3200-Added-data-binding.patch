From b688eacb4cc4f556574218e93102eb16c9d454a8 Mon Sep 17 00:00:00 2001
From: Ben Rady <benrady@gmail.com>
Date: Fri, 4 Sep 2015 14:01:08 -0500
Subject: [PATCH 1011/1031] Added data binding

---
 public/app.js            | 14 +++++++++++++-
 public/index.html        |  6 ++++--
 public/tests/app_spec.js | 14 +++++++++++++-
 3 files changed, 30 insertions(+), 4 deletions(-)

diff --git a/public/app.js b/public/app.js
index 0085b57..fbf3576 100644
--- a/public/app.js
+++ b/public/app.js
@@ -15,10 +15,22 @@ learnjs.problems = [
 ];
 // END: dataModel
 
+// START: applyObject
+learnjs.applyObject = function(obj, elem) {
+  for (var key in obj) {
+    elem.find('[data-name="' + key + '"]').text(obj[key]);
+  }
+};
+// END: applyObject
+
 // START: problemView
-learnjs.problemView = function(problemNumber) {
+learnjs.problemView = function(data) {
+  var problemNumber = parseInt(data, 10);
   var view = $('.templates .problem-view').clone();
   view.find('.title').text('Problem #' + problemNumber);
+  // START_HIGHLIGHT
+  learnjs.applyObject(learnjs.problems[problemNumber - 1], view);
+  // END_HIGHLIGHT
   return view;
 }
 // END: problemView
diff --git a/public/index.html b/public/index.html
index 356551e..ff36357 100644
--- a/public/index.html
+++ b/public/index.html
@@ -34,13 +34,15 @@
           </div>
         </div>
       </div>
-      <!-- START_HIGHLIGHT -->
+      <!-- START: problemView -->
       <div class='templates'>
         <div class='problem-view'>
           <h3 class='title'></h3>
+          <p data-name='description'></p>
+          <pre><code data-name='code'></code></pre>
         </div>
       </div>
-      <!-- END_HIGHLIGHT -->
+      <!-- END: problemView -->
     </div>
     <script type='text/javascript'>
       $(window).ready(learnjs.appOnReady);
diff --git a/public/tests/app_spec.js b/public/tests/app_spec.js
index af89748..1fff438 100644
--- a/public/tests/app_spec.js
+++ b/public/tests/app_spec.js
@@ -38,10 +38,22 @@ describe('LearnJS', function() {
 
   // START: problemView
   describe('problem view', function() {
+    var view;
+    beforeEach(function() {
+      view = learnjs.problemView('1');
+    });
+
     it('has a title that includes the problem number', function() {
-      var view = learnjs.problemView('1');
       expect(view.find('.title').text()).toEqual('Problem #1');
     });
+
+    it('shows the description', function() {
+      expect(view.find('[data-name="description"]').text()).toEqual('What is truth?');
+    });
+
+    it('shows the problem code', function() {
+      expect(view.find('[data-name="code"]').text()).toEqual('function problem() { return __; }');
+    });
   });
   // END: problemView
 });
-- 
2.3.8 (Apple Git-58)

